<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- CP Group -->
        <record id="group_purchase_cp" model="res.groups">
            <field name="name">CP</field>
            <field name="category_id" ref="base.module_category_inventory_purchase"/>
            <field name="implied_ids" eval="[(4, ref('purchase.group_purchase_user'))]"/>
            <field name="comment">Users in this group must be employees and can only create RFQs. They cannot modify RFQs once they are sent.</field>
        </record>

        <!-- HOD Group -->
        <record id="group_purchase_hod" model="res.groups">
            <field name="name">HOD</field>
            <field name="category_id" ref="base.module_category_inventory_purchase"/>
            <field name="implied_ids" eval="[(4, ref('purchase.group_purchase_user'))]"/>
            <field name="comment">Head of Department users who can approve purchase orders and manage projects within the purchase module.</field>
        </record>

        <!-- Server Action to Check Employee Link -->
        <!-- <record id="action_check_employee_link" model="ir.actions.server">
            <field name="name">Check Employee Link</field>
            <field name="model_id" ref="base.model_res_users"/>
            <field name="binding_model_id" ref="base.model_res_users"/>
            <field name="state">code</field>
            <field name="code">
                if record.has_group('av_purchase.group_purchase_cp'):
                    employee = env['hr.employee'].search([('user_id', '=', record.id)], limit=1)
                    if not employee:
                        raise ValidationError(_('CP users must be linked to an employee. Please link this user to an employee first.'))
            </field>
        </record> -->
    </data>
</odoo>
